<?xml version="1.0"?>
<!---
  - Copyright 2013 John Moore, Scott Gilroy
  -
  - This file is part of CollaboRhythm.
  -
  - CollaboRhythm is free software: you can redistribute it and/or modify it under the terms of the GNU General Public
  - License as published by the Free Software Foundation, either version 2 of the License, or (at your option) any later
  - version.
  -
  - CollaboRhythm is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied
  - warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more
  - details.
  -
  - You should have received a copy of the GNU General Public License along with CollaboRhythm.  If not, see
  - <http://www.gnu.org/licenses/>.
  -->
<HivivaMobile:HivivaMobileViewBase xmlns:fx="http://ns.adobe.com/mxml/2009"
					   xmlns:s="library://ns.adobe.com/flex/spark"
					   xmlns:HivivaMobile="collaboRhythm.shared.view.tablet.*"
					   actionBarVisible="true"
					   title="Pixelated View Home">
	<fx:Script><![CDATA[
		import collaboRhythm.core.model.AboutApplicationModel;
		import collaboRhythm.shared.model.settings.Settings;
		//import collaboRhythm.tablet.controller.TabletApplicationController;

		//import com.google.analytics.AnalyticsTracker;

		//import com.google.analytics.GATracker;

		import mx.core.IVisualElementContainer;
		import mx.events.FlexEvent;

		public static const RECORD_BACKGROUND_COLOR:uint = 0xE6E7E8;

		private var _widgetContainers:Vector.<IVisualElementContainer> = new Vector.<IVisualElementContainer>();
		private var _applicationInfo:AboutApplicationModel = new AboutApplicationModel();
		//private var _tracker:AnalyticsTracker;

		override protected function createChildren():void
		{
			super.createChildren();
			if (_hivivaApplicationController && _activeRecordAccount)
			{
				//init();
				//(_tabletApplicationController as TabletApplicationController).useWidgetContainers();
			}
		}

		public function init():void
		{
			_widgetContainers.push(mainWidgetsGroup);
			_widgetContainers.push(buttonWidgetsGroup);

			if (_hivivaApplicationController && _hivivaApplicationController.settings &&
					_hivivaApplicationController.settings.debuggingToolsEnabled)
				initializeVersionWatermark();
		}

		private function initializeVersionWatermark():void
		{
			_applicationInfo.settings = _hivivaApplicationController.settings;
			_applicationInfo.initialize();
			if (_applicationInfo.appModificationDate != null)
			{
				applicationModificationLabel.visible = true;
			}

			versionWatermarkGroup.visible = true;
		}

		public function get widgetContainers():Vector.<IVisualElementContainer>
		{
			return _widgetContainers;
		}

		public function get applicationInfo():AboutApplicationModel
		{
			return _applicationInfo;
		}
		]]></fx:Script>

	<s:VGroup id="versionWatermarkGroup" width="100%" height="100%" color="#888888" visible="false">
		<s:Label id="applicationNameLabel" text="{applicationInfo.appName}" fontWeight="bold"/>
		<s:Label id="applicationCopyrightLabel" text="{applicationInfo.appCopyright}"/>
		<s:Label id="applicationVersionLabel" text="Version {applicationInfo.appVersion}"/>
		<s:Label id="applicationModificationLabel" text="Updated {applicationInfo.appModificationDateString}"
				 visible="false"/>
		<s:Label id="deviceDetails" text="{applicationInfo.deviceDetails}"/>
	</s:VGroup>
	<s:VGroup width="100%" height="100%">
		<s:HGroup width="100%" height="100%" gap="0" paddingLeft="10" paddingRight="10" paddingTop="10"
				  paddingBottom="10" verticalAlign="middle">
			<s:HGroup id="mainWidgetsGroup" width="100%" height="100%" gap="20"/>
			<s:VGroup id="buttonWidgetsGroup" width="110" gap="70"/>
		</s:HGroup>
	</s:VGroup>
</HivivaMobile:HivivaMobileViewBase>
